process exampleRunAll = {


###############################
# include services
 include "Configuration/ReleaseValidation/data/Services.cfi"


###############################
# initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"


###############################
# make sure you have a random number generator

  service = RandomNumberGeneratorService
  {
    untracked uint32 sourceSeed = 98765
    PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared = 123456789
      }
  }

###############################
#input module:

include "IOMC/GeneratorInterface/data/PythiaHZZ4mu.cfi"

#and fix the number of events to create (default is 10)
replace PythiaSource.maxEvents = 20


###############################
#output module:

 module GEN-SIM-DIGI-RECO = PoolOutputModule {
     untracked string fileName = "exampleRunAllOutput.root"
     untracked vstring outputCommands = {
	#this is the place to drop information. Use the "drop *" command to do this, see CMSSW documentation (like the workbook) for more details
         "keep *"

     }
   }

##############################
# smear the primary vertex (exclude from path if you want vertex at (0,0,0)

  module VtxSmeared = VertexGenerator {
     string type = "IOMC/EventVertexGenerators/GaussianEventVertexGenerator"
     double MeanX = 0.
     double MeanY = 0.
     double MeanZ = 0.
     double SigmaX = 0.015
     double SigmaY = 0.015
     double SigmaZ = 53.0  // in mm (as in COBRA/OSCAR)
  }

###############################
# include the 'official' simulation/reconstruction file
# this file contains the path definitions for everything necessary to reconstruct things.

  include "SimG4Core/Application/data/SimG4Object.cfi"

  include "SimG4Core/Application/data/DigiWithEcalZeroSuppression.cff"

  sequence do_geant = { VtxSmeared,  g4SimHits}

  sequence digitization = {doAllDigiWithEcalZeroSup}

#include "Configuration/Examples/data/SIM.cff"
#include "Configuration/Examples/data/DIGI.cff"
include "Configuration/Examples/data/RECO.cff"

###############################
# now define what you want to do
path p = {do_geant,digitization, reconstruction}
# digitization and reconstruction are sequences of actions that are defined in the .cff files that were included

endpath outpath = {GEN-SIM-DIGI-RECO}	

}